<link rel="stylesheet" href="/ems/modules/notice-message/notice-message.css">

<div class="main-content">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header" v-if="!pageError">
        <h1 class="page-title">å…¬å‘Šä¸æ¶ˆæ¯</h1>
        <p class="page-subtitle">æŸ¥çœ‹ç³»ç»Ÿå…¬å‘Šä¸æˆ‘çš„å¾…åŠæ¶ˆæ¯</p>
    </div>

    <div class="message-grid">
        <!-- å…¬å‘Šåˆ—è¡¨ -->
        <div class="message-card">
            <div class="card-header">
                <h2>æœ€æ–°å…¬å‘Š</h2>
                <button class="refresh-btn" @click="fetchNotices">åˆ·æ–°</button>
            </div>
            <div v-if="noticeLoading" class="loading">
                <div class="loading-spinner"></div>
                <p>åŠ è½½ä¸­...</p>
            </div>
            <div v-else class="message-list">
                <div v-if="noticeList.length === 0" class="empty-state">
                    <div class="empty-icon">ğŸ“­</div>
                    <p>æš‚æ— å…¬å‘Š</p>
                </div>
                <div v-for="notice in noticeList" :key="notice.id" class="message-item">
                    <div class="message-title">{{ notice.title }}</div>
                    <div class="message-content">{{ notice.content }}</div>
                    <div class="message-meta">
                        <span>{{ notice.creatorName || 'ç³»ç»Ÿ' }}</span>
                        <span>{{ formatDateTime(notice.createTime) }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¾…åŠåˆ—è¡¨ -->
        <div class="message-card">
            <div class="card-header">
                <h2>æˆ‘çš„å¾…åŠ</h2>
                <button class="refresh-btn" @click="fetchTodos">åˆ·æ–°</button>
            </div>
            <div v-if="todoLoading" class="loading">
                <div class="loading-spinner"></div>
                <p>åŠ è½½ä¸­...</p>
            </div>
            <div v-else class="message-list">
                <div v-if="todoList.length === 0" class="empty-state">
                    <div class="empty-icon">âœ…</div>
                    <p>æš‚æ— å¾…åŠ</p>
                </div>
                <div v-for="todo in todoList" :key="todo.id" class="message-item">
                    <div class="message-title">{{ todo.title }}</div>
                    <div class="message-content">{{ todo.content }}</div>
                    <div class="message-meta">
                        <span>åˆ›å»ºäººï¼š{{ todo.creatorName || '-' }}</span>
                        <span>{{ formatDateTime(todo.createTime) }}</span>
                    </div>
                    <div class="todo-actions">
                        <button class="btn-complete" @click="completeTodo(todo)">å®Œæˆ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/ems/modules/notice-message/notice-message.js"></script>
