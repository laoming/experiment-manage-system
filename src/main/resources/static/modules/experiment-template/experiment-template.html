<link rel="stylesheet" href="/ems/modules/experiment-template/experiment-template.css">

<!-- MathJax 用于公式渲染 -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<div class="main-content editor-page" v-cloak>
    <!-- 左侧工具栏 -->
    <div class="toolbar">
        <div class="toolbar-title">插入组件</div>
        <div class="component-list">
            <!-- 内联组件（按钮插入） -->
            <div class="component-section">
                <div class="section-title">内联元素</div>
                <button class="insert-btn" onclick="insertInput()">
                    <span class="btn-icon">_</span>
                    <span>填空</span>
                </button>
                <button class="insert-btn" onclick="insertFormula()">
                    <span class="btn-icon">∑</span>
                    <span>公式</span>
                </button>
            </div>
            <!-- 块级组件（拖拽插入） -->
            <div class="component-section">
                <div class="section-title">块级元素</div>
                <div class="component-item" draggable="true" data-type="table">
                    <div class="component-icon">▦</div>
                    <div class="component-name">表格</div>
                </div>
                <div class="component-item" draggable="true" data-type="divider">
                    <div class="component-icon">─</div>
                    <div class="component-name">分割线</div>
                </div>
                <div class="component-item" draggable="true" data-type="image">
                    <div class="component-icon">🖼️</div>
                    <div class="component-name">图片</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 中间画布区域 -->
    <div class="canvas-container">
        <div class="canvas-header">
            <div class="canvas-title">
                <input type="text" id="templateName" placeholder="请输入模板名称">
            </div>
            <div class="canvas-actions">
                <button class="btn btn-secondary" onclick="clearCanvas()">清空画布</button>
                <button class="btn btn-success" onclick="previewTemplate()">预览</button>
                <button class="btn btn-info" onclick="exportTemplateAsMarkdown()">导出Markdown</button>
                <button class="btn btn-primary" onclick="saveTemplate()">保存模板</button>
            </div>
        </div>
        <div class="description-area">
            <textarea id="templateDescription" placeholder="请输入模板描述（可选）"></textarea>
        </div>
        <!-- 可编辑画布 -->
        <div class="canvas" id="canvas" contenteditable="true">
            <p>在此输入内容，使用左侧按钮插入填空或公式...</p>
        </div>
    </div>

    <!-- 右侧属性面板 -->
    <div class="properties-panel">
        <div class="panel-title">属性配置</div>
        <div class="panel-content" id="propertiesContent">
            <div class="help-content">
                <h4>使用说明</h4>
                <ul>
                    <li>直接在画布中输入文字</li>
                    <li>点击「填空」按钮插入填空项</li>
                    <li>点击「公式」按钮插入公式</li>
                    <li>拖拽块级元素到画布</li>
                    <li>点击元素可编辑其属性</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="/ems/modules/experiment-template/experiment-template.js"></script>
