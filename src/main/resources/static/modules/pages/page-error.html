<link rel="stylesheet" href="/ems/modules/css/page-error.css">


<div class="main-content">
                <!-- é”™è¯¯æç¤ºåŒºåŸŸ -->
                <div class="error-section">
                    <div class="error-icon">âš ï¸</div>
                    <h1 class="error-title">{{ errorInfo.title || 'é¡µé¢ä¸å­˜åœ¨' }}</h1>
                    <p class="error-message">{{ errorInfo.message || 'æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ã€‚' }}</p>
                    <div class="error-details" v-if="errorInfo.path">
                        <span class="detail-label">é¡µé¢è·¯å¾„ï¼š</span>
                        <span class="detail-path">{{ errorInfo.path }}</span>
                    </div>

                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="error-actions">
                        <button class="btn btn-primary" @click="goHome">
                            ğŸ  è¿”å›é¦–é¡µ
                        </button>
                        <button class="btn btn-secondary" @click="closeCurrentTab">
                            âœ• å…³é—­æ­¤æ ‡ç­¾é¡µ
                        </button>
                    </div>

                    <!-- å¸®åŠ©ä¿¡æ¯ -->
                    <div class="error-help">
                        <h3>å¯èƒ½çš„åŸå› ï¼š</h3>
                        <ul>
                            <li>é¡µé¢é“¾æ¥å·²è¿‡æœŸæˆ–å¤±æ•ˆ</li>
                            <li>é¡µé¢å·²è¢«ç®¡ç†å‘˜åˆ é™¤æˆ–ç§»åŠ¨</li>
                            <li>æ‚¨æ²¡æœ‰è®¿é—®è¯¥é¡µé¢çš„æƒé™</li>
                            <li>ç³»ç»Ÿæ­£åœ¨è¿›è¡Œç»´æŠ¤ï¼Œéƒ¨åˆ†åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨</li>
                        </ul>

                        <h3>æ‚¨å¯ä»¥å°è¯•ï¼š</h3>
                        <ul>
                            <li>ç‚¹å‡»"è¿”å›é¦–é¡µ"æŒ‰é’®å›åˆ°ç³»ç»Ÿé¦–é¡µ</li>
                            <li>ç‚¹å‡»"å…³é—­æ­¤æ ‡ç­¾é¡µ"å…³é—­å½“å‰é”™è¯¯é¡µé¢</li>
                            <li>è”ç³»ç³»ç»Ÿç®¡ç†å‘˜è·å–å¸®åŠ©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const { createApp } = Vue;

    const app = createApp({
            data() {
                return {
                    errorInfo: {
                        title: '',
                        message: '',
                        path: ''
                    }
                };
            },

            mounted() {
                this.loadErrorInfo();
                // æ¸…é™¤é”™è¯¯ä¿¡æ¯ï¼Œé¿å…ä¸‹æ¬¡æ‰“å¼€æ—¶ä»ç„¶æ˜¾ç¤º
                localStorage.removeItem('ems_page_error');
            },

            methods: {
                /**
                 * åŠ è½½é”™è¯¯ä¿¡æ¯
                 */
                loadErrorInfo() {
                    try {
                        const errorData = localStorage.getItem('ems_page_error');
                        if (errorData) {
                            this.errorInfo = JSON.parse(errorData);
                        }
                    } catch (error) {
                        console.error('[ErrorPage] åŠ è½½é”™è¯¯ä¿¡æ¯å¤±è´¥:', error);
                    }
                },

                /**
                 * è¿”å›é¦–é¡µ
                 */
                goHome() {
                    window.location.href = '/ems/common/pages/home.html';

                },


                /**
                 * å…³é—­å½“å‰æ ‡ç­¾é¡µ
                 */
                closeCurrentTab() {
                    const currentTab = TabsManager.getCurrentTab();
                    if (currentTab) {
                        TabsManager.closeTab(currentTab);
                    } else {
                        // å¦‚æœæ— æ³•è·å–å½“å‰æ ‡ç­¾é¡µï¼Œç›´æ¥è¿”å›é¦–é¡µ
                        this.goHome();
                    }
                }
            }
        });

        // æŒ‚è½½åº”ç”¨
        app.mount('#app');
</script>
