<link rel="stylesheet" href="/ems/modules/experiment-report/experiment-report.css">

<div class="main-content" v-cloak>
    <!-- 标签页切换 -->
    <div class="report-tabs">
        <div class="report-tab" :class="{ active: currentTab === 'pending' }" @click="switchTab('pending')">
            待提交
            <span class="tab-badge" v-if="pendingCount > 0">{{ pendingCount }}</span>
        </div>
        <div class="report-tab" :class="{ active: currentTab === 'submitted' }" @click="switchTab('submitted')">
            已提交
            <span class="tab-badge" v-if="submittedCount > 0">{{ submittedCount }}</span>
        </div>
    </div>

    <!-- 待提交列表 -->
    <div class="report-list-container" id="pendingContainer" v-show="currentTab === 'pending'">
        <div class="list-header">
            <div class="list-title">待提交的实验报告</div>
        </div>
        <div class="report-list" id="pendingList">
            <!-- 待提交列表将通过JS动态生成 -->
        </div>
    </div>

    <!-- 已提交列表 -->
    <div class="report-list-container" id="submittedContainer" v-show="currentTab === 'submitted'">
        <div class="list-header">
            <div class="list-title">已提交的实验报告</div>
        </div>
        <div class="report-list" id="submittedList">
            <!-- 已提交列表将通过JS动态生成 -->
        </div>
    </div>

    <!-- 模板选择区域 -->
    <div class="template-selector" id="templateSelector" style="display: none;">
        <div class="selector-header">
            <div class="selector-title">选择实验模板</div>
            <button class="btn btn-secondary" onclick="backToList()">返回列表</button>
        </div>
        <div class="template-grid" id="templateGrid">
            <!-- 模板卡片将通过JS动态生成 -->
        </div>
    </div>

    <!-- 报告编辑区域 -->
    <div class="report-editor" id="reportEditor" style="display: none;">
        <div class="editor-header">
            <div class="header-left">
                <button class="btn btn-secondary" onclick="backToList()">
                    <span class="btn-icon">←</span>
                    返回
                </button>
                <div class="report-title">
                    <input type="text" id="reportName" placeholder="请输入报告名称" value="我的实验报告">
                </div>
            </div>
            <div class="header-right">
                <button class="btn btn-secondary" onclick="saveDraft()">保存草稿</button>
                <button class="btn btn-success" onclick="previewReport()">预览</button>
                <button class="btn btn-primary" onclick="submitReport()">提交报告</button>
            </div>
        </div>

        <div class="report-content" id="reportContent">
            <!-- 报告内容将通过JS动态生成 -->
        </div>
    </div>

    <!-- 报告预览区域 -->
    <div class="report-preview" id="reportPreview" style="display: none;">
        <div class="preview-header">
            <button class="btn btn-secondary" onclick="closePreview()">
                <span class="btn-icon">×</span>
                关闭
            </button>
            <button class="btn btn-success" onclick="exportMarkdown()">导出Markdown</button>
            <button class="btn btn-primary" onclick="printReport()">打印</button>
        </div>
        <div class="preview-content" id="previewContent">
            <!-- 预览内容将通过JS动态生成 -->
        </div>
    </div>
</div>

<script src="/ems/modules/experiment-report/experiment-report.js"></script>
